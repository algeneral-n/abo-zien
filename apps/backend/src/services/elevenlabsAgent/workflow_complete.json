{
  "agent_id": "agent_0701kc4axybpf6fvak70xwfzpyka",
  "name": "RARE 4N Customer Service Workflow",
  "description": "Workflow ÙƒØ§Ù…Ù„ Ù„Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ù…Ù† Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ù„Ù„Ù†Ù‡Ø§ÙŠØ©",
  "nodes": [
    {
      "id": "start",
      "type": "start",
      "label": "Start",
      "position": { "x": 100, "y": 100 },
      "data": {
        "message_ar": "Ù…Ø±Ø­Ø¨Ø§Ù‹! ğŸ‘‹ Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ RARE 4N. Ø£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ.",
        "message_en": "Hello! ğŸ‘‹ Welcome to RARE 4N. I'm your smart assistant."
      }
    },
    {
      "id": "rare_greeting",
      "type": "message",
      "label": "RARE 4N",
      "position": { "x": 100, "y": 200 },
      "data": {
        "message_ar": "Ù…Ø±Ø­Ø¨Ø§Ù‹! ğŸ‘‹ Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ RARE 4N.\n\nÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ:\nğŸ“± Ø¨Ù†Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚\nğŸ–¥ï¸ Ø¨Ù†Ø§Ø¡ Ù†Ø¸Ø§Ù…\nğŸ¨ Ø§Ø®ØªÙŠØ§Ø± Ø«ÙŠÙ…\nğŸ’³ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¯ÙØ¹\nğŸ“‹ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª\n\nÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ",
        "message_en": "Hello! ğŸ‘‹ Welcome to RARE 4N.\n\nI can help you with:\nğŸ“± Building an app\nğŸ–¥ï¸ Building a system\nğŸ¨ Choosing a theme\nğŸ’³ Processing payment\nğŸ“‹ Tracking orders\n\nHow can I help you today?",
        "wait_for_response": true
      }
    },
    {
      "id": "detect_intent",
      "type": "condition",
      "label": "Detect Intent",
      "position": { "x": 100, "y": 300 },
      "data": {
        "conditions": [
          {
            "condition": "contains",
            "keywords_ar": ["ØªØ·Ø¨ÙŠÙ‚", "app", "Ø¨Ø±Ù†Ø§Ù…Ø¬"],
            "keywords_en": ["app", "application", "software"],
            "next_node": "show_apps"
          },
          {
            "condition": "contains",
            "keywords_ar": ["Ù†Ø¸Ø§Ù…", "system"],
            "keywords_en": ["system", "platform"],
            "next_node": "show_systems"
          },
          {
            "condition": "contains",
            "keywords_ar": ["Ø«ÙŠÙ…", "theme", "ØªØµÙ…ÙŠÙ…"],
            "keywords_en": ["theme", "design", "template"],
            "next_node": "show_themes"
          },
          {
            "condition": "contains",
            "keywords_ar": ["Ø·Ù„Ø¨", "order", "Ù…ØªØ§Ø¨Ø¹Ø©"],
            "keywords_en": ["order", "track", "status"],
            "next_node": "check_order"
          },
          {
            "condition": "default",
            "next_node": "ask_type"
          }
        ]
      }
    },
    {
      "id": "ask_type",
      "type": "message",
      "label": "Ask Type",
      "position": { "x": 100, "y": 400 },
      "data": {
        "message_ar": "Ù…Ø§ Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯Ù‡ØŸ\n\n1ï¸âƒ£ ØªØ·Ø¨ÙŠÙ‚ (App)\n2ï¸âƒ£ Ù†Ø¸Ø§Ù… (System)\n3ï¸âƒ£ Ø«ÙŠÙ… (Theme)\n\nÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø±Ù‚Ù… Ø£Ùˆ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ù†ÙˆØ¹.",
        "message_en": "What type of project do you want?\n\n1ï¸âƒ£ App\n2ï¸âƒ£ System\n3ï¸âƒ£ Theme\n\nPlease choose a number or type the name.",
        "wait_for_response": true
      }
    },
    {
      "id": "show_apps",
      "type": "function",
      "label": "Show Apps",
      "position": { "x": 300, "y": 300 },
      "data": {
        "function": "show_libraries",
        "parameters": {
          "library_type": "templates",
          "limit": 10
        },
        "message_ar": "Ø¥Ù„ÙŠÙƒ Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©:\n\n{library_items}\n\nÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ØªØ·Ø¨ÙŠÙ‚ Ø£Ùˆ ÙƒØªØ§Ø¨Ø© Ø§Ø³Ù…Ù‡.",
        "message_en": "Here are the available apps:\n\n{library_items}\n\nPlease choose an app or type its name.",
        "wait_for_response": true
      }
    },
    {
      "id": "show_systems",
      "type": "function",
      "label": "Show Systems",
      "position": { "x": 300, "y": 400 },
      "data": {
        "function": "show_libraries",
        "parameters": {
          "library_type": "systems",
          "limit": 10
        },
        "message_ar": "Ø¥Ù„ÙŠÙƒ Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ù…ØªØ§Ø­Ø©:\n\n{library_items}\n\nÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù†Ø¸Ø§Ù… Ø£Ùˆ ÙƒØªØ§Ø¨Ø© Ø§Ø³Ù…Ù‡.",
        "message_en": "Here are the available systems:\n\n{library_items}\n\nPlease choose a system or type its name.",
        "wait_for_response": true
      }
    },
    {
      "id": "show_themes",
      "type": "function",
      "label": "Show Themes",
      "position": { "x": 300, "y": 500 },
      "data": {
        "function": "show_libraries",
        "parameters": {
          "library_type": "themes",
          "limit": 10
        },
        "message_ar": "Ø¥Ù„ÙŠÙƒ Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø§Ù„Ø«ÙŠÙ…Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©:\n\n{library_items}\n\nÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø«ÙŠÙ… Ø£Ùˆ ÙƒØªØ§Ø¨Ø© Ø§Ø³Ù…Ù‡.",
        "message_en": "Here are the available themes:\n\n{library_items}\n\nPlease choose a theme or type its name.",
        "wait_for_response": true
      }
    },
    {
      "id": "confirm_selection",
      "type": "message",
      "label": "Confirm Selection",
      "position": { "x": 100, "y": 500 },
      "data": {
        "message_ar": "Ø±Ø§Ø¦Ø¹! Ø§Ø®ØªØ±Øª {item_name}.\n\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ",
        "message_en": "Great! You selected {item_name}.\n\nDo you want to continue?",
        "wait_for_response": true
      }
    },
    {
      "id": "ask_logo",
      "type": "message",
      "label": "Ask Logo",
      "position": { "x": 100, "y": 600 },
      "data": {
        "message_ar": "Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ù„ÙˆØ¬Ùˆ Ù„Ù„Ù…Ø´Ø±ÙˆØ¹ØŸ\n\nâœ… Ù†Ø¹Ù… - ÙŠØ±Ø¬Ù‰ Ø±ÙØ¹Ù‡ ÙÙŠ ØµÙØ­Ø© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©\nâŒ Ù„Ø§ - Ø³Ù†Ø³ØªØ®Ø¯Ù… Ù„ÙˆØ¬Ùˆ Ø§ÙØªØ±Ø§Ø¶ÙŠ\n\nÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¨Ù†Ø¹Ù… Ø£Ùˆ Ù„Ø§.",
        "message_en": "Do you have a logo for the project?\n\nâœ… Yes - please upload it in the chat page\nâŒ No - we'll use a default logo\n\nPlease answer yes or no.",
        "wait_for_response": true
      }
    },
    {
      "id": "collect_info",
      "type": "function",
      "label": "Collect Info",
      "position": { "x": 100, "y": 700 },
      "data": {
        "function": "collect_customer_info",
        "questions": [
          {
            "field": "app_name",
            "question_ar": "Ù…Ø§ Ø§Ø³Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚/Ø§Ù„Ù†Ø¸Ø§Ù…ØŸ",
            "question_en": "What is the app/system name?",
            "required": true
          },
          {
            "field": "color",
            "question_ar": "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ù…ÙØ¶Ù„ Ù„Ø¯ÙŠÙƒØŸ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)",
            "question_en": "What is your preferred color? (optional)",
            "required": false
          },
          {
            "field": "email",
            "question_ar": "Ù…Ø§ Ù‡Ùˆ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØŸ",
            "question_en": "What is your email?",
            "required": true,
            "validation": "email"
          },
          {
            "field": "phone",
            "question_ar": "Ù…Ø§ Ù‡Ùˆ Ø±Ù‚Ù… Ù‡Ø§ØªÙÙƒØŸ",
            "question_en": "What is your phone number?",
            "required": true,
            "validation": "phone"
          }
        ],
        "message_ar": "Ø§Ù„Ø¢Ù†ØŒ ÙŠØ±Ø¬Ù‰ ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©:\n\n{current_question}",
        "message_en": "Now, please provide the following information:\n\n{current_question}",
        "wait_for_response": true
      }
    },
    {
      "id": "ask_payment",
      "type": "message",
      "label": "Ask Payment",
      "position": { "x": 100, "y": 800 },
      "data": {
        "message_ar": "Ù…Ù…ØªØ§Ø²! ØªÙ… Ø¬Ù…Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª.\n\nÙ‡Ù„ ØªØ±ØºØ¨ Ø¨Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø¢Ù† Ø£Ù… Ø¹Ù†Ø¯ Ø§Ù„Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ù„Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©ØŸ\n\nğŸ’³ Ø§Ù„Ø¢Ù† - Ø§Ù„Ø¯ÙØ¹ Ø§Ù„ÙÙˆØ±ÙŠ\nâ° Ù„Ø§Ø­Ù‚Ø§Ù‹ - Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©\n\nÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø®ÙŠØ§Ø±.",
        "message_en": "Excellent! All information collected.\n\nDo you want to pay now or at the second visit for preview?\n\nğŸ’³ Now - Immediate payment\nâ° Later - Payment at preview\n\nPlease choose an option.",
        "wait_for_response": true
      }
    },
    {
      "id": "process_payment_now",
      "type": "function",
      "label": "Process Payment Now",
      "position": { "x": 300, "y": 800 },
      "data": {
        "function": "create_payment_session",
        "parameters": {
          "payment_method": "stripe"
        },
        "message_ar": "Ø³ÙŠØªÙ… ÙØªØ­ ØµÙØ­Ø© Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø¢Ù†. ÙŠØ±Ø¬Ù‰ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø¯ÙØ¹.",
        "message_en": "Payment page will open now. Please complete the payment.",
        "wait_for_confirmation": true
      }
    },
    {
      "id": "submit_request",
      "type": "function",
      "label": "Submit Request",
      "position": { "x": 100, "y": 900 },
      "data": {
        "function": "submit_build_request",
        "message_ar": "ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­! Ø³ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹ØªÙ‡ ÙˆØ§Ù„Ø¨Ø¯Ø¡ Ø¨Ø§Ù„Ø¨Ù†Ø§Ø¡ Ù‚Ø±ÙŠØ¨Ø§Ù‹.",
        "message_en": "Your request has been submitted successfully! It will be reviewed and building will start soon.",
        "next_node": "notify_building"
      }
    },
    {
      "id": "notify_building",
      "type": "message",
      "label": "Notify Building",
      "position": { "x": 100, "y": 1000 },
      "data": {
        "message_ar": "ğŸš€ ØªÙ… Ø¨Ø¯Ø¡ Ø§Ù„Ø¨Ù†Ø§Ø¡! Ø³ÙŠØªÙ… Ø¥Ø´Ø¹Ø§Ø±Ùƒ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡.",
        "message_en": "ğŸš€ Building started! You'll be notified when complete.",
        "wait_for_event": "build_complete"
      }
    },
    {
      "id": "notify_preview",
      "type": "function",
      "label": "Notify Preview",
      "position": { "x": 100, "y": 1100 },
      "data": {
        "function": "get_build_status",
        "message_ar": "âœ… Ø§Ù„Ø¨Ù†Ø§Ø¡ Ù…ÙƒØªÙ…Ù„!\n\nØ±Ø§Ø¨Ø· Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©: {preview_link}\n\nÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙˆØ¥Ø®Ø¨Ø§Ø±Ù†Ø§ Ø¨Ø±Ø£ÙŠÙƒ.",
        "message_en": "âœ… Build complete!\n\nPreview link: {preview_link}\n\nPlease review the project and let us know your feedback.",
        "wait_for_response": true
      }
    },
    {
      "id": "ask_revision",
      "type": "message",
      "label": "Ask Revision",
      "position": { "x": 100, "y": 1200 },
      "data": {
        "message_ar": "Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø£ÙŠ Ø·Ù„Ø¨Ø§Øª ØªØ¹Ø¯ÙŠÙ„ØŸ\n\nâœ… Ù†Ø¹Ù… - Ø§Ø°ÙƒØ± Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª\nâŒ Ù„Ø§ - Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ù„Ù„Ø¯ÙØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ\n\nÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©.",
        "message_en": "Do you have any revision requests?\n\nâœ… Yes - mention revisions\nâŒ No - proceed to final payment\n\nPlease answer.",
        "wait_for_response": true
      }
    },
    {
      "id": "process_revision",
      "type": "function",
      "label": "Process Revision",
      "position": { "x": 300, "y": 1200 },
      "data": {
        "function": "submit_revision",
        "message_ar": "ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ¹Ø¯ÙŠÙ„. Ø³ÙŠØªÙ… ØªØ·Ø¨ÙŠÙ‚Ù‡Ø§ ÙˆØ¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ù…Ø¹Ø§ÙŠÙ†Ø© Ø¬Ø¯ÙŠØ¯.",
        "message_en": "Revision requests recorded. They will be applied and a new preview link will be sent.",
        "wait_for_event": "revision_complete"
      }
    },
    {
      "id": "request_final_payment",
      "type": "function",
      "label": "Request Final Payment",
      "position": { "x": 100, "y": 1300 },
      "data": {
        "function": "create_payment_session",
        "parameters": {
          "payment_method": "stripe"
        },
        "message_ar": "ÙŠØ±Ø¬Ù‰ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ù„Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ù…Ù„Ù.",
        "message_en": "Please complete final payment to receive the file.",
        "wait_for_confirmation": true
      }
    },
    {
      "id": "deliver_file",
      "type": "function",
      "label": "Deliver File",
      "position": { "x": 100, "y": 1400 },
      "data": {
        "function": "get_build_status",
        "message_ar": "âœ… Ø§Ù„Ù…Ù„Ù Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØ­Ù…ÙŠÙ„!\n\nØ±Ø§Ø¨Ø· Ø§Ù„ØªØ­Ù…ÙŠÙ„: {download_link}\n\nØ´ÙƒØ±Ø§Ù‹ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… RARE 4N! ğŸ‰",
        "message_en": "âœ… File ready for download!\n\nDownload link: {download_link}\n\nThank you for using RARE 4N! ğŸ‰",
        "next_node": "end"
      }
    },
    {
      "id": "check_order",
      "type": "function",
      "label": "Check Order",
      "position": { "x": 500, "y": 300 },
      "data": {
        "function": "get_build_status",
        "message_ar": "Ø­Ø§Ù„Ø© Ø·Ù„Ø¨Ùƒ:\n\n{status_info}\n\nÙ‡Ù„ ØªØ­ØªØ§Ø¬ Ù…Ø³Ø§Ø¹Ø¯Ø© Ø£Ø®Ø±Ù‰ØŸ",
        "message_en": "Your order status:\n\n{status_info}\n\nDo you need any other help?",
        "wait_for_response": true
      }
    },
    {
      "id": "transfer_human",
      "type": "transfer",
      "label": "Transfer",
      "position": { "x": 100, "y": 1500 },
      "data": {
        "phone_number": "+971529211077",
        "message_ar": "Ø³ÙŠØªÙ… ØªØ­ÙˆÙŠÙ„Ùƒ Ø¥Ù„Ù‰ ÙØ±ÙŠÙ‚ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ø¢Ù†.",
        "message_en": "You will be transferred to our support team now."
      }
    },
    {
      "id": "end",
      "type": "end",
      "label": "End",
      "position": { "x": 100, "y": 1600 },
      "data": {
        "message_ar": "Ø´ÙƒØ±Ø§Ù‹ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… RARE 4N! ğŸ‰",
        "message_en": "Thank you for using RARE 4N! ğŸ‰"
      }
    }
  ],
  "edges": [
    { "from": "start", "to": "rare_greeting" },
    { "from": "rare_greeting", "to": "detect_intent" },
    { "from": "detect_intent", "to": "show_apps", "condition": "app" },
    { "from": "detect_intent", "to": "show_systems", "condition": "system" },
    { "from": "detect_intent", "to": "show_themes", "condition": "theme" },
    { "from": "detect_intent", "to": "check_order", "condition": "order" },
    { "from": "detect_intent", "to": "ask_type", "condition": "default" },
    { "from": "ask_type", "to": "show_apps", "condition": "app" },
    { "from": "ask_type", "to": "show_systems", "condition": "system" },
    { "from": "ask_type", "to": "show_themes", "condition": "theme" },
    { "from": "show_apps", "to": "confirm_selection" },
    { "from": "show_systems", "to": "confirm_selection" },
    { "from": "show_themes", "to": "confirm_selection" },
    { "from": "confirm_selection", "to": "ask_logo" },
    { "from": "ask_logo", "to": "collect_info" },
    { "from": "collect_info", "to": "ask_payment" },
    { "from": "ask_payment", "to": "process_payment_now", "condition": "now" },
    { "from": "ask_payment", "to": "submit_request", "condition": "later" },
    { "from": "process_payment_now", "to": "submit_request" },
    { "from": "submit_request", "to": "notify_building" },
    { "from": "notify_building", "to": "notify_preview" },
    { "from": "notify_preview", "to": "ask_revision" },
    { "from": "ask_revision", "to": "process_revision", "condition": "yes" },
    { "from": "ask_revision", "to": "request_final_payment", "condition": "no" },
    { "from": "process_revision", "to": "notify_preview" },
    { "from": "request_final_payment", "to": "deliver_file" },
    { "from": "deliver_file", "to": "end" },
    { "from": "check_order", "to": "transfer_human", "condition": "need_help" },
    { "from": "check_order", "to": "end", "condition": "no_help" }
  ]
}


