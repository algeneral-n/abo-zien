# ?????????? Backend RARE 4N

## ??? ???? ???? ????????????:

1. **Backend Server** ???? Express + Socket.IO
2. **MongoDB** - ?????????? ???????????? ???????????????? ????????????????
3. **Supabase** - ?????????? ???????????? ???????????????? PostgreSQL + Real-time
4. **SQLite** - ?????????? ???????????? ?????????? ??????????????????
5. **WebSocket** - GPT Streaming + Voice Realtime
6. **Security** - Headers + CORS ??????????
7. **Services** - Whisper + ElevenLabs

## ???? ?????????? ??????????????:

### 1. ?????? ?????? ????????????:

```bash
# ???????? ?????????? ENV_KEYS.txt ?????? ?????? .env
copy ENV_KEYS.txt .env
```

???? ????????????:
- ???????? `ENV_KEYS.txt`
- ???????? ???? ??????????????
- ???????? ?????? `.env` ???? ???????? `backend`
- ???????? ??????????????

### 2. ?????????? ????????????????:

```bash
cd backend
npm install
```

### 3. ?????????? ????????????:

```bash
# Development (???? auto-reload)
npm run dev

# Production
npm start

# ???? ???????????? ?????? ??????????
start.bat
```

### 4. ???????????? ???? ??????????????:

???????? ?????????????? ??????:
```
http://localhost:5000/health
```

?????? ???? ??????:
```json
{
  "status": "online",
  "databases": {
    "local": "connected",
    "mongodb": "connected",
    "supabase": "connected"
  },
  ...
}
```

## ???? WebSocket Endpoints:

### GPT Streaming:
```javascript
const socket = io('http://localhost:5000/gpt/stream');
socket.emit('message', { message: '??????????' });
socket.on('token', (data) => console.log(data.token));
```

### Voice Realtime:
```javascript
const socket = io('http://localhost:5000/voice/realtime');
socket.emit('audio-input', { audio: base64Audio, language: 'ar' });
socket.on('transcription', (data) => console.log(data.text));
socket.on('assistant-audio', (data) => console.log(data.audio));
```

## ???? ?????????? ????????????????:

### MongoDB:
- **URI**: ?????????? ???? `.env` ???? `MONGODB_URI`
- **Database**: `rare4n`

### Supabase:
- **URL**: ?????????? ???? `.env` ???? `EXPO_PUBLIC_SUPABASE_URL`
- **Key**: ?????????? ???? `.env` ???? `EXPO_PUBLIC_SUPABASE_KEY`

### SQLite:
- **Path**: `backend/data/abo-zien.db`
- ?????? ???????????? ????????????????

## ???? ??????????????:

- **Domain**: `zien-ai.app`
- **Google Workspace**: `gm@zien-ai.app`
- **API Domain**: `API_DOMAIN=zien-ai.app` ???? `.env`

## ???? ????????????:

- Security Headers ??????????
- CORS ??????????
- JWT Authentication
- Encryption

## ???? ??????????????:

- ?????? ?????? ?????????? MongoDB?? ???????????? ???????????? ???????????????? SQLite ??????
- ?????? ?????? ?????????? Supabase?? ???????????? ???????????? ???????? Real-time features
- ???????? ???????????????? ???????????? ???? `ENV_KEYS.txt`

## ???? ?????????????? ??????????????:

### MongoDB ???? ????????:
- ???????? ???? `MONGODB_URI` ???? `.env`
- ???????? ???? ?????????? ????????????????
- ???????????? ?????????? ???????? MongoDB (SQLite ??????)

### Supabase ???? ????????:
- ???????? ???? `EXPO_PUBLIC_SUPABASE_URL` ?? `EXPO_PUBLIC_SUPABASE_KEY`
- ???????????? ?????????? ???????? Supabase (???????? Real-time)

### Port 5000 ????????????:
- ???????? `PORT` ???? `.env`
- ???? ???????? ?????????????? ???????? ???????????? Port 5000









